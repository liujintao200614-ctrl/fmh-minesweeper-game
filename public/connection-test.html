<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 FMH 扫雷游戏 - 连接测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
        }
        .status { 
            background: #4CAF50; 
            color: white; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 20px 0; 
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .info { 
            background: #f0f0f0; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 20px 0; 
            text-align: left; 
        }
        .btn { 
            background: #4CAF50; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 8px; 
            cursor: pointer; 
            margin: 10px;
            transition: all 0.2s ease;
        }
        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        .network-info { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 15px; 
        }
        .network-item { 
            background: #e3f2fd; 
            padding: 15px; 
            border-radius: 8px; 
            transition: transform 0.2s ease;
        }
        .network-item:hover {
            transform: scale(1.02);
        }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .progress {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50 0%, #45a049 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 FMH Minesweeper - 静态连接测试</h1>
        
        <div class="status">
            ✅ 静态文件访问成功！
        </div>
        
        <div class="info">
            <h3>📋 连接状态检查：</h3>
            <div id="connection-status">正在检查连接状态...</div>
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>
        
        <div class="network-info">
            <div class="network-item">
                <strong>🌐 当前页面：</strong><br>
                <span id="current-url">加载中...</span>
            </div>
            <div class="network-item">
                <strong>⏰ 本地时间：</strong><br>
                <span id="local-time">加载中...</span>
            </div>
            <div class="network-item">
                <strong>🔧 浏览器信息：</strong><br>
                <span id="browser-info">检测中...</span>
            </div>
            <div class="network-item">
                <strong>🖥️ 屏幕分辨率：</strong><br>
                <span id="screen-info">获取中...</span>
            </div>
        </div>
        
        <div style="margin: 30px 0;">
            <h3>🎮 FMH 扫雷游戏启动选项：</h3>
            <button class="btn" onclick="openGame()">🎯 打开游戏 (推荐)</button>
            <button class="btn" onclick="testPorts()">🔧 端口测试</button>
            <button class="btn" onclick="window.location.reload()">🔄 刷新测试</button>
        </div>
        
        <div id="test-results" style="margin-top: 20px;"></div>
        
        <div class="info warning">
            <h4>📋 解决方案指南:</h4>
            <ul style="text-align: left;">
                <li><strong>✅ 看到此页面:</strong> 静态文件服务正常</li>
                <li><strong>🚀 启动游戏:</strong> 点击上方 "打开游戏" 按钮</li>
                <li><strong>🔧 端口问题:</strong> 点击 "端口测试" 检查可用端口</li>
                <li><strong>🌐 网络问题:</strong> 尝试不同浏览器或重启网络</li>
                <li><strong>🔒 安全软件:</strong> 检查防火墙和安全软件设置</li>
            </ul>
        </div>
    </div>
    
    <script>
        console.log('🎯 FMH 扫雷游戏连接测试页面启动');
        
        // 更新页面信息
        function updateInfo() {
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('local-time').textContent = new Date().toLocaleString('zh-CN');
            document.getElementById('browser-info').textContent = getBrowserInfo();
            document.getElementById('screen-info').textContent = screen.width + 'x' + screen.height;
        }
        
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            if (ua.includes('Chrome')) return 'Chrome';
            if (ua.includes('Firefox')) return 'Firefox';
            if (ua.includes('Safari') && !ua.includes('Chrome')) return 'Safari';
            if (ua.includes('Edge')) return 'Edge';
            return '其他浏览器';
        }
        
        // 连接测试进度
        function runConnectionTest() {
            const statusEl = document.getElementById('connection-status');
            const progressBar = document.getElementById('progress-bar');
            let progress = 0;
            
            const steps = [
                { text: '🔍 检测页面加载状态...', delay: 500 },
                { text: '🌐 验证浏览器兼容性...', delay: 800 },
                { text: '💻 获取系统信息...', delay: 600 },
                { text: '✅ 连接测试完成！', delay: 300 }
            ];
            
            function runStep(index) {
                if (index < steps.length) {
                    statusEl.innerHTML = '<div class="' + (index === steps.length - 1 ? 'success' : 'info') + '" style="padding: 15px; border-radius: 8px;">' + steps[index].text + '</div>';
                    progress = ((index + 1) / steps.length) * 100;
                    progressBar.style.width = progress + '%';
                    
                    setTimeout(() => runStep(index + 1), steps[index].delay);
                }
            }
            
            runStep(0);
        }
        
        // 端口测试功能
        function testPorts() {
            const resultsEl = document.getElementById('test-results');
            resultsEl.innerHTML = '<div class="info" style="padding: 15px; border-radius: 8px;">🔧 正在测试常用端口...</div>';
            
            const ports = [3000, 3001, 5173, 8080, 8888, 3333];
            let testResults = '<div class="info" style="padding: 15px; border-radius: 8px;"><h4>端口测试结果：</h4><ul>';
            
            ports.forEach(port => {
                // 模拟端口测试（实际中需要服务器配合）
                testResults += '<li><strong>端口 ' + port + ':</strong> <span style="color: #856404;">需要服务器运行才能测试</span></li>';
            });
            
            testResults += '</ul><p><strong>建议:</strong> 尝试启动 Vite 开发服务器： <code>npm run dev</code></p></div>';
            resultsEl.innerHTML = testResults;
        }
        
        // 启动游戏功能
        function openGame() {
            const resultsEl = document.getElementById('test-results');
            resultsEl.innerHTML = '<div class="warning" style="padding: 15px; border-radius: 8px; text-align: left;"><h4>🎮 FMH 扫雷游戏启动指南:</h4><ol><li><strong>方式一:</strong> 开发服务器<br><code>npm run dev</code> 然后访问 <a href="http://localhost:5173" target="_blank">http://localhost:5173</a></li><li><strong>方式二:</strong> Next.js 服务器<br><code>npm run dev:next</code> 然后访问 <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li><li><strong>方式三:</strong> 直接文件<br>在项目目录中找到 <code>index.html</code> 文件，双击用浏览器打开</li></ol><p><strong>注意:</strong> 推荐使用方式一的 Vite 开发服务器，支持热重载和完整功能。</p></div>';
            
            // 尝试自动打开几个可能的地址
            setTimeout(() => {
                const urls = ['http://localhost:5173', 'http://localhost:3000', 'http://localhost:3001'];
                urls.forEach((url, index) => {
                    setTimeout(() => {
                        console.log('尝试打开:', url);
                        // window.open(url, '_blank'); // 取消自动打开，避免弹窗拦截
                    }, index * 1000);
                });
            }, 1000);
        }
        
        // 页面加载完成后执行
        window.addEventListener('load', () => {
            updateInfo();
            runConnectionTest();
            
            // 定时更新时间
            setInterval(() => {
                document.getElementById('local-time').textContent = new Date().toLocaleString('zh-CN');
            }, 1000);
        });
        
        console.log('🎯 连接测试页面初始化完成');
        console.log('📍 当前地址:', window.location.href);
        console.log('🔧 用户代理:', navigator.userAgent);
    </script>
</body>
</html>